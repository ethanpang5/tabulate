(this["webpackJsonptab-ulate"]=this["webpackJsonptab-ulate"]||[]).push([[0],{54:function(e,t,n){},58:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(24),c=n.n(i),o=(n(54),n(55),n(56),n.p,n(57),n(42)),s=(n(58),n(17)),u=n.n(s),l=n(22),d=n(75),b=n(72),j=n(76),f=n(10);n(60),n(70);f.a.initializeApp({apiKey:"AIzaSyAwcnfyJDrxYTVGnbGJ39pwyRPmbbln8jI",authDomain:"tabulate-da8ac.firebaseapp.com",projectId:"tabulate-da8ac",storageBucket:"tabulate-da8ac.appspot.com",messagingSenderId:"600957298630",appId:"1:600957298630:web:8dff818513beaf9c9734c7",measurementId:"G-FRRT9SB5QF"}),console.log(f.a);var h=f.a.auth(),g=f.a.firestore();function m(){var e=new f.a.auth.GoogleAuthProvider;f.a.auth().signInWithPopup(e).then((function(){var e=f.a.firestore().collection("users").doc(p());e.get().then((function(t){t.exists||e.set({name:p(),widgets:[],timestamp:f.a.firestore.FieldValue.serverTimestamp()}).catch((function(e){console.error("Error writing new message to database",e)}))}))})).catch((function(e){console.error("Error signing in",e)}))}function p(){return f.a.auth().currentUser.displayName}window.firebase&&f.a.app instanceof Function&&f.a.app().options||window.alert("You have not configured and imported the Firebase SDK. Make sure you go through the codelab setup instructions and make sure you are running the codelab using `firebase serve`");var v=n(18),O=n(3),x=Object(r.createContext)({user:null}),w=function(e){var t=Object(r.useState)(null),n=Object(v.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){h.onAuthStateChanged(function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(t.displayName,t.email,i(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log("userprovider",a)}),[]),Object(O.jsx)(x.Provider,{value:a,children:e.children})},k=function(){var e=Object(r.useContext)(x),t=function(){var e=Object(l.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,void f.a.auth().signOut();case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(d.a,{bg:"light",expand:"lg",children:[Object(O.jsx)(d.a.Brand,{href:"#home",style:{fontSize:40},children:"Tabulate"}),Object(O.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(O.jsx)(d.a.Collapse,{id:"basic-navbar-nav"}),e?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(b.a,{className:"mr-2",src:f.a.auth().currentUser.photoURL||"https://lh3.googleusercontent.com/-5NpIVUCd2lE/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucmn22K-OnZPInLvX19yR_TVKiUFCA/s96-c/photo.jpg",roundedCircle:!0,height:40}),Object(O.jsx)(j.a,{onClick:t,children:"Sign out"})]}):Object(O.jsx)(j.a,{onClick:m,children:"Sign in"})]})},A=n(28),y=n(29),C=n(73),S=n(74),T=function(e){var t=e.link,n=e.removeLink;return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{class:"widget-link",children:[Object(O.jsx)("a",{href:t.url,target:"_blank",className:"classes-link",children:t.name}),Object(O.jsx)("button",{onClick:function(){return n(t.url)},type:"button",class:"btn btn-dark btn-sm delete-button",children:"delete"})]})})},F=function(e){var t=e.title,n=e.links,r=e.openModal,a=e.removeLink,i=e.deleteWidget,c=e.isActive,o=e.onClick,s=e.changeWidgetTitle,d=function(e){a(t,e)},b=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<n.length)){e.next=7;break}return e.next=4,chrome.tabs.create({url:n[t].url});case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"widget",id:c?"active-widget":"not-active",onClick:o,children:[Object(O.jsxs)("div",{className:"widget-header",children:[Object(O.jsx)("input",{className:"widget-title2",type:"text",value:t,onChange:function(e){var n=e.target.value;console.log("newTitle:",n),s(t,n)}}),Object(O.jsxs)("div",{className:"widget-control",children:[Object(O.jsx)("button",{class:"btn btn-dark btn-sm action-button",onClick:function(){return i(t)},children:"delete widget"}),Object(O.jsx)("button",{class:"btn btn-secondary btn-sm action-button",onClick:b,children:"open all"}),Object(O.jsx)("button",{class:"btn btn-success btn-sm action-button",onClick:function(){return r(t)},children:"new link"})]})]}),Object(O.jsx)("div",{className:"widget-grid",children:n.map((function(e){return Object(O.jsx)(T,{link:e,removeLink:d})}))})]})},W=function(e){var t=Object(r.useState)(""),n=Object(v.a)(t,2),a=n[0],i=n[1],c=function(){e.onHide(),i("")};return Object(O.jsxs)(C.a,Object(y.a)(Object(y.a)({},e),{},{onHide:c,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(O.jsx)(C.a.Header,{closeButton:!0,children:Object(O.jsx)(C.a.Title,{id:"contained-modal-title-vcenter",children:"Add Widget"})}),Object(O.jsx)(C.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(t){t.preventDefault(),c(),e.addWidgetToDashboard(a)},children:[Object(O.jsxs)(S.a.Group,{controlId:"websiteName",children:[Object(O.jsx)(S.a.Label,{children:"Title"}),Object(O.jsx)(S.a.Control,{type:"text",placeholder:"",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(O.jsx)(j.a,{variant:"primary",type:"submit",children:"Submit"})]})}),Object(O.jsx)(C.a.Footer,{children:Object(O.jsx)(j.a,{onClick:c,children:"Close"})})]}))};function I(e){var t=Object(r.useState)(""),n=Object(v.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(""),o=Object(v.a)(c,2),s=o[0],u=o[1],l=function(){e.onHide(),i(""),u("")};return Object(O.jsxs)(C.a,Object(y.a)(Object(y.a)({},e),{},{onHide:l,size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(O.jsx)(C.a.Header,{closeButton:!0,children:Object(O.jsxs)(C.a.Title,{id:"contained-modal-title-vcenter",children:["Add to ",e.currWidget]})}),Object(O.jsx)(C.a.Body,{children:Object(O.jsxs)(S.a,{onSubmit:function(t){t.preventDefault(),l(),e.addLinkToWidget(a,s,e.currWidget)},children:[Object(O.jsxs)(S.a.Group,{controlId:"websiteName",children:[Object(O.jsx)(S.a.Label,{children:"Website name"}),Object(O.jsx)(S.a.Control,{type:"text",placeholder:"",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(O.jsxs)(S.a.Group,{controlId:"url",children:[Object(O.jsx)(S.a.Label,{children:"URL"}),Object(O.jsx)(S.a.Control,{type:"text",placeholder:"",value:s,onChange:function(e){return u(e.target.value)}})]}),Object(O.jsx)(j.a,{variant:"primary",type:"submit",children:"Save"})]})})]}))}var L=function(){var e,t,n=Object(r.useContext)(x),i=a.a.useState(!1),c=Object(v.a)(i,2),o=c[0],s=c[1],d=a.a.useState(""),b=Object(v.a)(d,2),j=b[0],h=b[1],m=Object(r.useState)(!1),w=Object(v.a)(m,2),k=w[0],y=w[1],C=a.a.useState([]),S=Object(v.a)(C,2),T=S[0],L=S[1],N=Object(r.useState)([]),E=Object(v.a)(N,2),B=(E[0],E[1],null===n||void 0===n||null===(e=n.email)||void 0===e||e.replace("@","%40"),function(){var e=Object(l.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=g.collection("users").doc(t.displayName),e.next=3,n.get();case 3:return r=e.sent,e.next=6,r.data().widgets;case 6:a=e.sent,L(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());Object(r.useEffect)((function(){n&&B(n)}),[n]);var V=function(e,t){var n=T.find((function(t){return t.title===e}));n.links=n.links.filter((function(e){return e.url!==t}));var r=T.map((function(e){return e}));L(r),function(e,t){var n=f.a.firestore().collection("users").doc(p());n.get().then((function(e){if(e.exists)return e.data().widgets})).then((function(r){var a=r.find((function(t){return t.title==e}));a.links=a.links.filter((function(e){return e.url!==t})),n.update({name:p(),widgets:r,timestamp:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))}))}(e,t)},D=function(e){s(!0),h(e)},H=function(e){var t=T.filter((function(t){return t.title!==e}));L(t),function(e){var t=f.a.firestore().collection("users").doc(p());t.get().then((function(e){if(e.exists)return e.data().widgets})).then((function(n){var r=n.filter((function(t){return t.title!==e}));t.update({name:p(),widgets:r,timestamp:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))}))}(e)},G=function(e,t){T.find((function(t){return t.title===e})).title=t;var n=T.map((function(e){return e}));L(n),function(e,t){var n=f.a.firestore().collection("users").doc(p());n.get().then((function(e){if(e.exists)return e.data().widgets})).then((function(r){var a=r.find((function(t){return t.title===e}));a.title=t,console.log("title:",a.title),n.update({name:p(),widgets:r,timestamp:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))}))}(e,t)};return Object(O.jsx)(O.Fragment,{children:n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"dashboard-grid",children:T.map((function(e){return Object(O.jsx)(F,{title:e.title,links:e.links,openModal:D,removeLink:V,deleteWidget:H,changeWidgetTitle:G,isActive:j===e.title,onClick:function(){h(e.title)}})}))}),Object(O.jsx)("div",{class:"addWidgetContainer",children:Object(O.jsx)("button",(t={class:"addWidgetButton",type:"button"},Object(A.a)(t,"class","btn btn-primary"),Object(A.a)(t,"onClick",(function(){y(!0)})),Object(A.a)(t,"children","Add widget"),t))}),Object(O.jsx)(I,{show:o,onHide:function(){return s(!1)},currWidget:j,addLinkToWidget:function(e,t,n){var r=T.find((function(e){return e.title===n}));console.log("159",T,r),t.startsWith("https://")||(t="https://"+t),r.links.push({url:t,name:e});var a=T.map((function(e){return e}));L(a),function(e,t,n){var r=f.a.firestore().collection("users").doc(p()),a=["check this"];r.get().then((function(r){(a=r.data().widgets).find((function(t){return t.title===e})).links.push({url:n,name:t}),a.map((function(e){return e}))})).then((function(){return r.update({name:p(),widgets:a,timestamp:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))})).catch((function(e){console.log("Error getting document:",e)}))}(n,e,t)}}),Object(O.jsx)(W,{show:k,onHide:function(){return y(!1)},addWidgetToDashboard:function(e){var t=T.map((function(e){return e}));t.push({title:e,links:[]}),L(t),function(e){var t=f.a.firestore().collection("users").doc(p());t&&t.get().then((function(e){return e.data().widgets})).then((function(n){return n.push({title:e,links:[]}),t.update({name:p(),widgets:n,timestamp:f.a.firestore.FieldValue.serverTimestamp()},{merge:!0}).catch((function(e){console.error("Error writing new message to database",e)}))}))}(e)}})]}):Object(O.jsx)(O.Fragment,{})})};var N=function(){return Object(O.jsx)(w,{children:Object(O.jsx)(o.a,{children:Object(O.jsxs)("div",{children:[Object(O.jsx)(k,{}),Object(O.jsx)(L,{})]})})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),E()}},[[69,1,2]]]);
//# sourceMappingURL=main.0802a030.chunk.js.map